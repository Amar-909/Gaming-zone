<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cosmic Maze Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: url('https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed;
      background-size: cover;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }
    #gameCanvas {
      display: block;
      margin: 20px auto;
      background: rgba(0, 0, 0, 0.6);
      border: 0.5px solid #fff; /* Thinner border */
    }
    #info {
      font-size: 20px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>üåå Cosmic Maze Challenge üåå</h1>
  <canvas id="gameCanvas" width="600" height="600"></canvas>
  <div id="info">Use arrow keys to reach the goal ‚≠ê</div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let level = 1;
    let timeLeft = 30;
    let timer;

    const mazes = [
      [ // Level 1 (easy)
        "########",
        "#S     #",
        "# #### #",
        "#  #   #",
        "#### # #",
        "#     G#",
        "########"
      ],
      [ // Level 2 (medium - denser walls)
        "##########",
        "#S  ##   #",
        "# ## ### #",
        "#   ## # #",
        "### ### ##",
        "#  #   #G#",
        "##########"
      ],
      [ // Level 3 (hard - trickier paths)
        "############",
        "#S  ####   #",
        "### ### ## #",
        "# ##   ##  #",
        "# ### ######",
        "#   ###  G #",
        "############"
      ]
    ];

    let maze, cellSize, player, goal;

    function loadLevel(lvl) {
      maze = mazes[lvl-1];
      cellSize = canvas.width / maze[0].length;
      player = {x:0,y:0};
      goal = {x:0,y:0};

      for (let y=0; y<maze.length; y++) {
        for (let x=0; x<maze[y].length; x++) {
          if (maze[y][x] === 'S') player = {x,y};
          if (maze[y][x] === 'G') goal = {x,y};
        }
      }

      // Stricter time limits for harder levels
      timeLeft = 40 - (lvl * 8);
      clearInterval(timer);
      timer = setInterval(()=>{
        timeLeft--;
        if(timeLeft<=0){
          endGame(false);
        }
        draw();
      },1000);

      draw();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for (let y=0; y<maze.length; y++) {
        for (let x=0; x<maze[y].length; x++) {
          if (maze[y][x] === '#') {
            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            ctx.fillRect(x*cellSize,y*cellSize,cellSize,cellSize);
          }
          if (maze[y][x] === 'G') {
            ctx.fillStyle = 'gold';
            ctx.font = cellSize+'px Arial';
            ctx.fillText('‚≠ê',x*cellSize,y*cellSize+cellSize);
          }
        }
      }
      // Draw player
      ctx.fillStyle = 'lime';
      ctx.beginPath();
      ctx.arc(player.x*cellSize+cellSize/2, player.y*cellSize+cellSize/2, cellSize/3, 0, Math.PI*2);
      ctx.fill();

      // Info
      document.getElementById('info').innerText = `Level: ${level} | Time Left: ${timeLeft}s`;
    }

    function move(dx,dy){
      const nx = player.x+dx;
      const ny = player.y+dy;
      if (maze[ny][nx] !== '#') {
        player.x=nx;
        player.y=ny;
        if(nx===goal.x && ny===goal.y){
          if(level<mazes.length){
            level++;
            loadLevel(level);
          }else{
            endGame(true);
          }
        }
      }
      draw();
    }

    function endGame(won){
      clearInterval(timer);
      ctx.fillStyle = 'rgba(0,0,0,0.7)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = 'white';
      ctx.font = '40px Arial';
      if(won){
        ctx.fillText('üéâ You Won All Levels! üéâ', 60, canvas.height/2);
      }else{
        ctx.fillText('‚è≥ Time Up! Try Again!', 90, canvas.height/2);
      }
    }

    document.addEventListener('keydown', e =>{
      if(e.key==='ArrowUp') move(0,-1);
      if(e.key==='ArrowDown') move(0,1);
      if(e.key==='ArrowLeft') move(-1,0);
      if(e.key==='ArrowRight') move(1,0);
    });

    loadLevel(level);
  </script>
</body>
</html>